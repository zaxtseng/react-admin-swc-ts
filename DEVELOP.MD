# å®‰è£…
## å‰ç½®æ¡ä»¶
ä½¿ç”¨pnpmåšåŒ…ç®¡ç†å·¥å…·,nodeç‰ˆæœ¬16+,ä½¿ç”¨nvmç®¡ç†nodeç‰ˆæœ¬(pnpmå’Œnvmå¦‚ä½•å®‰è£…è¯·è‡ªè¡Œgoogle).
```bash
# æŸ¥çœ‹å½“å‰å„ä¸ªç‰ˆæœ¬æƒ…å†µ
nvm ls
# å®‰è£…æœ€æ–°ç‰ˆæœ¬node16
nvm install lts/gallium
# åˆ‡æ¢ç‰ˆæœ¬node16
nvm use lts/gallium

# æˆ–è€…å®‰è£…node18(å’Œnode16äºŒé€‰ä¸€)
# å®‰è£…æœ€æ–°ç‰ˆæœ¬node18
nvm install lts/hydrogen
# åˆ‡æ¢ç‰ˆæœ¬node18
nvm use lts/hydrogen
# é‡å¯ç»ˆç«¯
```
## å®‰è£…Vite
```bash
pnpm create vite react-admin-swc-ts --template react-swc-ts
cd react-admin-swc-ts
pnpm install
pnpm dev --open
```

# å¼€å‘ç¯å¢ƒå®‰è£…
## ç»Ÿä¸€ç¼–è¾‘å™¨è§„èŒƒ

åˆ›å»ºæ–‡ä»¶ `.editorconfig` .

```yaml
# https://editorconfig.org

# å·²ç»æ˜¯é¡¶å±‚é…ç½®æ–‡ä»¶ï¼Œä¸å¿…ç»§ç»­å‘ä¸Šæœç´¢
root = true

[*]
# ç¼–ç å­—ç¬¦é›†
charset = utf-8
# ç¼©è¿›é£æ ¼æ˜¯ç©ºæ ¼
indent_style = space
# ä¸€ä¸ªç¼©è¿›å ç”¨ä¸¤ä¸ªç©ºæ ¼ï¼Œå› æ²¡æœ‰è®¾ç½®tab_withï¼Œä¸€ä¸ªTabå ç”¨2åˆ—
indent_size = 2
# æ¢è¡Œç¬¦ lf
end_of_line = lf
# æ–‡ä»¶ä»¥ä¸€ä¸ªç©ºç™½è¡Œç»“å°¾
insert_final_newline = true
# å»é™¤è¡Œé¦–çš„ä»»æ„ç©ºç™½å­—ç¬¦
trim_trailing_whitespace = true

[*.md]
insert_final_newline = false
trim_trailing_whitespace = false
```

## å®‰è£…æ ¼å¼åŒ–é…ç½®å·¥å…·

éœ€è¦å®‰è£…çš„å·¥å…·æœ‰: eslint, stylelint, prettier, postcss, husky, lint-staged.

ä¸‹é¢æ˜¯å®‰è£…æµç¨‹,ä¹Ÿå¯ä»¥å‚è€ƒè¯¥æ–¹æ¡ˆ

[ååˆ†é’Ÿæ­å»ºä¸€ä¸ª Vite+React+TS+ESLint+Prettier+Husky+Commitlint é¡¹ç›®](https://juejin.cn/post/7123612981895626760)

æˆ–è€…æ‡’äººé…ç½®,[ç‚¹è¿™é‡Œä¸€é”®é…ç½®](https://github.com/lyh0371/web-norm)

### ESLint

ç”¨äºæ£€æŸ¥ js ä»£ç é”™è¯¯.å®‰è£… vscode æ’ä»¶ ESLint

```
pnpm create @eslint/config
```
æŒ‰ç…§ä¸‹é¢é€‰é¡¹èµ°
```bash
âœ” How would you like to use ESLint? Â· problems
âœ” What type of modules does your project use? Â· esm
âœ” Which framework does your project use? Â· react
âœ” Does your project use TypeScript? Â· Yes
âœ” Where does your code run? Â· browser
âœ” What format do you want your config file to be in? Â· JavaScript
Local ESLint installation not found.
The config that you've selected requires the following dependencies:

eslint-plugin-react@latest @typescript-eslint/eslint-plugin@latest @typescript-eslint/parser@latest eslint@latest
âœ” Would you like to install them now? Â· Yes
âœ” Which package manager do you want to use? Â· pnpm
```
è¯¥å‘½ä»¤ä¼šè‡ªåŠ¨ç”Ÿæˆé…ç½®æ–‡ä»¶`.eslintrc.cjs`.

#### è§„åˆ™é…ç½®

```js
// @see: http://eslint.cn

module.exports = {
	settings: {
		react: {
			version: "detect"
		}
	},
	root: true,
	env: {
		browser: true,
		node: true,
		es6: true
	},
	/* æŒ‡å®šå¦‚ä½•è§£æè¯­æ³• */
	parser: "@typescript-eslint/parser",
	/* ä¼˜å…ˆçº§ä½äº parse çš„è¯­æ³•è§£æé…ç½® */
	parserOptions: {
		ecmaVersion: 2020,
		sourceType: "module",
		jsxPragma: "React",
		ecmaFeatures: {
			jsx: true
		}
	},
	plugins: ["react", "@typescript-eslint", "react-hooks", "prettier"],
	/* ç»§æ‰¿æŸäº›å·²æœ‰çš„è§„åˆ™ */
	extends: [
		"eslint:recommended",
		"plugin:react/recommended",
		"plugin:@typescript-eslint/recommended",
		"plugin:react/jsx-runtime",
		"plugin:react-hooks/recommended",
		"prettier",
		"plugin:prettier/recommended"
	],
	/*
	 * "off" æˆ– 0    ==>  å…³é—­è§„åˆ™
	 * "warn" æˆ– 1   ==>  æ‰“å¼€çš„è§„åˆ™ä½œä¸ºè­¦å‘Šï¼ˆä¸å½±å“ä»£ç æ‰§è¡Œï¼‰
	 * "error" æˆ– 2  ==>  è§„åˆ™ä½œä¸ºä¸€ä¸ªé”™è¯¯ï¼ˆä»£ç ä¸èƒ½æ‰§è¡Œï¼Œç•Œé¢æŠ¥é”™ï¼‰
	 */
	rules: {
		// eslint (http://eslint.cn/docs/rules)
		"no-var": "error", // è¦æ±‚ä½¿ç”¨ let æˆ– const è€Œä¸æ˜¯ var
		"no-multiple-empty-lines": ["error", { max: 1 }], // ä¸å…è®¸å¤šä¸ªç©ºè¡Œ
		"no-use-before-define": "off", // ç¦æ­¢åœ¨ å‡½æ•°/ç±»/å˜é‡ å®šä¹‰ä¹‹å‰ä½¿ç”¨å®ƒä»¬
		"prefer-const": "off", // æ­¤è§„åˆ™æ—¨åœ¨æ ‡è®°ä½¿ç”¨ let å…³é”®å­—å£°æ˜ä½†åœ¨åˆå§‹åˆ†é…åä»æœªé‡æ–°åˆ†é…çš„å˜é‡ï¼Œè¦æ±‚ä½¿ç”¨ const
		"no-irregular-whitespace": "off", // ç¦æ­¢ä¸è§„åˆ™çš„ç©ºç™½

		// typeScript (https://typescript-eslint.io/rules)
		"@typescript-eslint/no-unused-vars": "error", // ç¦æ­¢å®šä¹‰æœªä½¿ç”¨çš„å˜é‡
		"@typescript-eslint/no-inferrable-types": "off", // å¯ä»¥è½»æ¾æ¨æ–­çš„æ˜¾å¼ç±»å‹å¯èƒ½ä¼šå¢åŠ ä¸å¿…è¦çš„å†—é•¿
		"@typescript-eslint/no-namespace": "off", // ç¦æ­¢ä½¿ç”¨è‡ªå®šä¹‰ TypeScript æ¨¡å—å’Œå‘½åç©ºé—´ã€‚
		"@typescript-eslint/no-explicit-any": "off", // ç¦æ­¢ä½¿ç”¨ any ç±»å‹
		"@typescript-eslint/ban-ts-ignore": "off", // ç¦æ­¢ä½¿ç”¨ @ts-ignore
		"@typescript-eslint/ban-types": "off", // ç¦æ­¢ä½¿ç”¨ç‰¹å®šç±»å‹
		"@typescript-eslint/explicit-function-return-type": "off", // ä¸å…è®¸å¯¹åˆå§‹åŒ–ä¸ºæ•°å­—ã€å­—ç¬¦ä¸²æˆ–å¸ƒå°”å€¼çš„å˜é‡æˆ–å‚æ•°è¿›è¡Œæ˜¾å¼ç±»å‹å£°æ˜
		"@typescript-eslint/no-var-requires": "off", // ä¸å…è®¸åœ¨ import è¯­å¥ä¸­ä½¿ç”¨ require è¯­å¥
		"@typescript-eslint/no-empty-function": "off", // ç¦æ­¢ç©ºå‡½æ•°
		"@typescript-eslint/no-use-before-define": "off", // ç¦æ­¢åœ¨å˜é‡å®šä¹‰ä¹‹å‰ä½¿ç”¨å®ƒä»¬
		"@typescript-eslint/ban-ts-comment": "off", // ç¦æ­¢ @ts-<directive> ä½¿ç”¨æ³¨é‡Šæˆ–è¦æ±‚åœ¨æŒ‡ä»¤åè¿›è¡Œæè¿°
		"@typescript-eslint/no-non-null-assertion": "off", // ä¸å…è®¸ä½¿ç”¨åç¼€è¿ç®—ç¬¦çš„éç©ºæ–­è¨€(!)
		"@typescript-eslint/explicit-module-boundary-types": "off", // è¦æ±‚å¯¼å‡ºå‡½æ•°å’Œç±»çš„å…¬å…±ç±»æ–¹æ³•çš„æ˜¾å¼è¿”å›å’Œå‚æ•°ç±»å‹

		// react (https://github.com/jsx-eslint/eslint-plugin-react)
		"react-hooks/rules-of-hooks": "off",
		"react-hooks/exhaustive-deps": "off"
	}
};
```

#### .eslintignore è§„åˆ™

åˆ›å»º`.eslintignore`æ–‡ä»¶.

```
*.sh
node_modules
*.md
*.woff
*.ttf
.vscode
.idea
dist
/public
/docs
.husky
.local
/bin
.eslintrc.cjs
.prettierrc.cjs
/src/mock/*
```

`package.json`æ–‡ä»¶ä¸­`scripts`ä¸‹æ·»åŠ  node å‘½ä»¤

```json
"scripts": {
    "dev": "vite",
    "serve": "vite",
    "build": "tsc && vite build",
    "preview": "vite preview",
    "lint:eslint": "eslint --fix --ext .js,.ts,.tsx ./src",
}
```

### Prettier

å®‰è£… vscode æ’ä»¶ Prettier
ç”¨äºæ ¼å¼åŒ–ä»£ç .

```bash
pnpm add prettier eslint-plugin-prettier eslint-config-prettier eslint-plugin-react eslint-plugin-react-hooks -D
```

åˆ›å»º`.prettierrc.cjs`.

#### è§„åˆ™é…ç½®

```js
// @see: https://www.prettier.cn
module.exports = {
	// è¶…è¿‡æœ€å¤§å€¼æ¢è¡Œ
	printWidth: 130,
	// ç¼©è¿›å­—èŠ‚æ•°
	tabWidth: 2,
	// ä½¿ç”¨åˆ¶è¡¨ç¬¦è€Œä¸æ˜¯ç©ºæ ¼ç¼©è¿›è¡Œ
	useTabs: true,
	// ç»“å°¾ä¸ç”¨åˆ†å·(trueæœ‰ï¼Œfalseæ²¡æœ‰)
	semi: true,
	// ä½¿ç”¨å•å¼•å·(trueå•åŒå¼•å·ï¼ŒfalseåŒå¼•å·)
	singleQuote: true,
	// æ›´æ”¹å¼•ç”¨å¯¹è±¡å±æ€§çš„æ—¶é—´ å¯é€‰å€¼"<as-needed|consistent|preserve>"
	quoteProps: "as-needed",
	// åœ¨å¯¹è±¡ï¼Œæ•°ç»„æ‹¬å·ä¸æ–‡å­—ä¹‹é—´åŠ ç©ºæ ¼ "{ foo: bar }"
	bracketSpacing: true,
	// å¤šè¡Œæ—¶å°½å¯èƒ½æ‰“å°å°¾éšé€—å·ã€‚ï¼ˆä¾‹å¦‚ï¼Œå•è¡Œæ•°ç»„æ°¸è¿œä¸ä¼šå‡ºç°é€—å·ç»“å°¾ã€‚ï¼‰ å¯é€‰å€¼"<none|es5|all>"ï¼Œé»˜è®¤none
	trailingComma: "none",
	// åœ¨JSXä¸­ä½¿ç”¨å•å¼•å·è€Œä¸æ˜¯åŒå¼•å·
	jsxSingleQuote: false,
	//  (x) => {} ç®­å¤´å‡½æ•°å‚æ•°åªæœ‰ä¸€ä¸ªæ—¶æ˜¯å¦è¦æœ‰å°æ‹¬å·ã€‚avoidï¼šçœç•¥æ‹¬å· ,alwaysï¼šä¸çœç•¥æ‹¬å·
	arrowParens: "avoid",
	// å¦‚æœæ–‡ä»¶é¡¶éƒ¨å·²ç»æœ‰ä¸€ä¸ª doclockï¼Œè¿™ä¸ªé€‰é¡¹å°†æ–°å»ºä¸€è¡Œæ³¨é‡Šï¼Œå¹¶æ‰“ä¸Š@formatæ ‡è®°ã€‚
	insertPragma: false,
	// æŒ‡å®šè¦ä½¿ç”¨çš„è§£æå™¨ï¼Œä¸éœ€è¦å†™æ–‡ä»¶å¼€å¤´çš„ @prettier
	requirePragma: false,
	// é»˜è®¤å€¼ã€‚å› ä¸ºä½¿ç”¨äº†ä¸€äº›æŠ˜è¡Œæ•æ„Ÿå‹çš„æ¸²æŸ“å™¨ï¼ˆå¦‚GitHub commentï¼‰è€ŒæŒ‰ç…§markdownæ–‡æœ¬æ ·å¼è¿›è¡ŒæŠ˜è¡Œ
	proseWrap: "preserve",
	// åœ¨htmlä¸­ç©ºæ ¼æ˜¯å¦æ˜¯æ•æ„Ÿçš„ "css" - éµå®ˆCSSæ˜¾ç¤ºå±æ€§çš„é»˜è®¤å€¼ï¼Œ "strict" - ç©ºæ ¼è¢«è®¤ä¸ºæ˜¯æ•æ„Ÿçš„ ï¼Œ"ignore" - ç©ºæ ¼è¢«è®¤ä¸ºæ˜¯ä¸æ•æ„Ÿçš„
	htmlWhitespaceSensitivity: "css",
	// æ¢è¡Œç¬¦ä½¿ç”¨ lf ç»“å°¾æ˜¯ å¯é€‰å€¼"<auto|lf|crlf|cr>"
	endOfLine: "auto",
	// è¿™ä¸¤ä¸ªé€‰é¡¹å¯ç”¨äºæ ¼å¼åŒ–ä»¥ç»™å®šå­—ç¬¦åç§»é‡ï¼ˆåˆ†åˆ«åŒ…æ‹¬å’Œä¸åŒ…æ‹¬ï¼‰å¼€å§‹å’Œç»“æŸçš„ä»£ç 
	rangeStart: 0,
	rangeEnd: Infinity,
	// Vueæ–‡ä»¶è„šæœ¬å’Œæ ·å¼æ ‡ç­¾ç¼©è¿›
	vueIndentScriptAndStyle: false
};
```

#### .prettierignore è§„åˆ™

åˆ›å»º`.prettierignore`æ–‡ä»¶.

```
/dist/*
.local
/node_modules/**

**/*.svg
**/*.sh

/public/*
```

`package.json`æ–‡ä»¶ä¸­`scripts`ä¸‹æ·»åŠ  node å‘½ä»¤

```json
"scripts": {
    "dev": "vite",
    "serve": "vite",
    "build": "tsc && vite build",
    "preview": "vite preview",
    "lint:eslint": "eslint --fix --ext .js,.ts,.tsx ./src",
    "lint:prettier": "prettier --write --loglevel warn \"src/**/*.{js,ts,json,tsx,css,less,scss,html,md}\"",
}
```

### stylelint
å› ä¸ºä½¿ç”¨äº†CSS-in-JSæ–¹æ¡ˆ,æœªä½¿ç”¨lessæˆ–è€…scssæ–¹æ¡ˆ,è€Œä¸”vanilla-extractæš‚æ—¶æ²¡æœ‰stylelintè§„åˆ™,æ‰€ä»¥æš‚æ—¶ä¸ä½¿ç”¨ä¸‹é¢çš„æµç¨‹.

å½“ç„¶å¦‚æœä½ æ²¡æœ‰ä½¿ç”¨vanilla-extract,è€Œä½¿ç”¨lessæˆ–è€…scss,åˆ™å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹æ¡ˆ.

ç”¨äºæ£€æŸ¥ css è¯­æ³•é”™è¯¯.å®‰è£… vscode æ’ä»¶ Stylelint

```
pnpm add stylelint postcss less autoprefixer stylelint-config-prettier stylelint-config-recommended-less stylelint-config-recess-order stylelint-config-standard stylelint-less -D
```

#### è§„åˆ™é…ç½®

æ–°å»º`.stylelintrc.js`.

```js
// @see: https://stylelint.io

module.exports = {
	extends: [
		"stylelint-config-standard", // é…ç½®stylelintæ‹“å±•æ’ä»¶
		"stylelint-config-prettier", // é…ç½®stylelintå’Œprettierå…¼å®¹
		"stylelint-config-recess-order" // é…ç½®stylelint csså±æ€§ä¹¦å†™é¡ºåºæ’ä»¶,
	],
	plugins: ["stylelint-less"], // é…ç½®stylelint lessæ‹“å±•æ’ä»¶
	rules: {
		indentation: null, // æŒ‡å®šç¼©è¿›ç©ºæ ¼
		"no-descending-specificity": null, // ç¦æ­¢åœ¨å…·æœ‰è¾ƒé«˜ä¼˜å…ˆçº§çš„é€‰æ‹©å™¨åå‡ºç°è¢«å…¶è¦†ç›–çš„è¾ƒä½ä¼˜å…ˆçº§çš„é€‰æ‹©å™¨
		"function-url-quotes": "always", // è¦æ±‚æˆ–ç¦æ­¢ URL çš„å¼•å· "always(å¿…é¡»åŠ ä¸Šå¼•å·)"|"never(æ²¡æœ‰å¼•å·)"
		"string-quotes": "double", // æŒ‡å®šå­—ç¬¦ä¸²ä½¿ç”¨å•å¼•å·æˆ–åŒå¼•å·
		"unit-case": null, // æŒ‡å®šå•ä½çš„å¤§å°å†™ "lower(å…¨å°å†™)"|"upper(å…¨å¤§å†™)"
		"color-hex-case": "lower", // æŒ‡å®š 16 è¿›åˆ¶é¢œè‰²çš„å¤§å°å†™ "lower(å…¨å°å†™)"|"upper(å…¨å¤§å†™)"
		"color-hex-length": "long", // æŒ‡å®š 16 è¿›åˆ¶é¢œè‰²çš„ç®€å†™æˆ–æ‰©å†™ "short(16è¿›åˆ¶ç®€å†™)"|"long(16è¿›åˆ¶æ‰©å†™)"
		"rule-empty-line-before": "never", // è¦æ±‚æˆ–ç¦æ­¢åœ¨è§„åˆ™ä¹‹å‰çš„ç©ºè¡Œ "always(è§„åˆ™ä¹‹å‰å¿…é¡»å§‹ç»ˆæœ‰ä¸€ä¸ªç©ºè¡Œ)"|"never(è§„åˆ™å‰ç»ä¸èƒ½æœ‰ç©ºè¡Œ)"|"always-multi-line(å¤šè¡Œè§„åˆ™ä¹‹å‰å¿…é¡»å§‹ç»ˆæœ‰ä¸€ä¸ªç©ºè¡Œ)"|"never-multi-line(å¤šè¡Œè§„åˆ™ä¹‹å‰ç»ä¸èƒ½æœ‰ç©ºè¡Œã€‚)"
		"font-family-no-missing-generic-family-keyword": null, // ç¦æ­¢åœ¨å­—ä½“æ—åç§°åˆ—è¡¨ä¸­ç¼ºå°‘é€šç”¨å­—ä½“æ—å…³é”®å­—
		"block-opening-brace-space-before": "always", // è¦æ±‚åœ¨å—çš„å¼€å¤§æ‹¬å·ä¹‹å‰å¿…é¡»æœ‰ä¸€ä¸ªç©ºæ ¼æˆ–ä¸èƒ½æœ‰ç©ºç™½ç¬¦ "always(å¤§æ‹¬å·å‰å¿…é¡»å§‹ç»ˆæœ‰ä¸€ä¸ªç©ºæ ¼)"|"never(å·¦å¤§æ‹¬å·ä¹‹å‰ç»ä¸èƒ½æœ‰ç©ºæ ¼)"|"always-single-line(åœ¨å•è¡Œå—ä¸­çš„å·¦å¤§æ‹¬å·ä¹‹å‰å¿…é¡»å§‹ç»ˆæœ‰ä¸€ä¸ªç©ºæ ¼)"|"never-single-line(åœ¨å•è¡Œå—ä¸­çš„å·¦å¤§æ‹¬å·ä¹‹å‰ç»ä¸èƒ½æœ‰ç©ºæ ¼)"|"always-multi-line(åœ¨å¤šè¡Œå—ä¸­ï¼Œå·¦å¤§æ‹¬å·ä¹‹å‰å¿…é¡»å§‹ç»ˆæœ‰ä¸€ä¸ªç©ºæ ¼)"|"never-multi-line(å¤šè¡Œå—ä¸­çš„å·¦å¤§æ‹¬å·ä¹‹å‰ç»ä¸èƒ½æœ‰ç©ºæ ¼)"
		"property-no-unknown": null, // ç¦æ­¢æœªçŸ¥çš„å±æ€§(true ä¸ºä¸å…è®¸)
		"no-empty-source": null, // ç¦æ­¢ç©ºæºç 
		"declaration-block-trailing-semicolon": null, // è¦æ±‚æˆ–ä¸å…è®¸åœ¨å£°æ˜å—ä¸­ä½¿ç”¨å°¾éšåˆ†å· stringï¼š"always(å¿…é¡»å§‹ç»ˆæœ‰ä¸€ä¸ªå°¾éšåˆ†å·)"|"never(ä¸å¾—æœ‰å°¾éšåˆ†å·)"
		"selector-class-pattern": null, // å¼ºåˆ¶é€‰æ‹©å™¨ç±»åçš„æ ¼å¼
		"value-no-vendor-prefix": null, // å…³é—­ vendor-prefix(ä¸ºäº†è§£å†³å¤šè¡Œçœç•¥ -webkit-box)
		"at-rule-no-unknown": null,
		"selector-pseudo-class-no-unknown": [
			true,
			{
				ignorePseudoClasses: ["global", "v-deep", "deep"]
			}
		]
	}
};
```

#### .stylelintignore è§„åˆ™

```
/dist/*
/public/*
public/*
```

`package.json`æ–‡ä»¶ä¸­`scripts`ä¸‹æ·»åŠ  node å‘½ä»¤

```json
"scripts": {
    "dev": "vite",
    "serve": "vite",
    "build": "tsc && vite build",
    "preview": "vite preview",
    "lint:eslint": "eslint --fix --ext .js,.ts,.tsx ./src",
    "lint:prettier": "prettier --write --loglevel warn \"src/**/*.{js,ts,json,tsx,css,less,scss,html,md}\"",
    "lint:stylelint": "stylelint --cache --fix \"**/*.{less,postcss,css,scss}\" --cache --cache-location node_modules/.cache/stylelint/",

}
```

#### ä¿®æ”¹è®¾ç½®

åœ¨.vscode/settings.json ä¸­æ·»åŠ ä¸€ä¸‹è§„åˆ™

```json
{
  // å¼€å¯è‡ªåŠ¨ä¿®å¤
  "editor.codeActionsOnSave": {
    "source.fixAll": false,
    "source.fixAll.eslint": true,
    "source.fixAll.stylelint": true
  },
  // ä¿å­˜çš„æ—¶å€™è‡ªåŠ¨æ ¼å¼åŒ–
  "editor.formatOnSave": true,
  // é»˜è®¤æ ¼å¼åŒ–å·¥å…·é€‰æ‹©prettier
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  // é…ç½®è¯¥é¡¹ï¼Œæ–°å»ºæ–‡ä»¶æ—¶é»˜è®¤å°±æ˜¯spaceï¼š2
  "editor.tabSize": 2,
  // stylelintæ ¡éªŒçš„æ–‡ä»¶æ ¼å¼
  "stylelint.validate": ["css", "less", "vue", "html"]
}
```


## ä»£ç æäº¤æ£€æŸ¥

### Husky(å“ˆå£«å¥‡)

```
pnpm add husky -D
```

package.json æ·»åŠ è„šæœ¬å‘½ä»¤

```json
{
	"scripts": {
		"prepare": "husky install"
	}
}
```

æ‰§è¡Œå‘½ä»¤

```
git init && pnpm prepare && pnpm husky add .husky/pre-commit "pnpm lint:lint-staged"
```

æ‰§è¡Œå®Œä¸Šé¢çš„å‘½ä»¤åï¼Œä¼šåœ¨.husky ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª pre-commit æ–‡ä»¶

ç°åœ¨å½“æˆ‘ä»¬æ‰§è¡Œ`git commit`çš„æ—¶å€™å°±ä¼šæ‰§è¡Œ`pnpm lint`çš„ä¸‰ä¸ªä»£ç ï¼Œå½“è¿™ä¸¤æ¡å‘½ä»¤å‡ºç°æŠ¥é”™ï¼Œå°±ä¸ä¼šæäº¤æˆåŠŸã€‚ä»¥æ­¤æ¥ä¿è¯æäº¤ä»£ç çš„è´¨é‡å’Œæ ¼å¼ã€‚

### lint-staged

æ¯æ¬¡æäº¤éƒ½æ£€æµ‹æ‰€æœ‰ä»£ç å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„å†³å®šï¼Œæ¯”å¦‚ä½ åªä¿®æ”¹äº†æ–‡ä»¶ A ç»“æœæ–‡ä»¶ B æŠ¥é”™äº†ï¼Œä½†æ˜¯æ–‡ä»¶ B å¹¶ä¸æ˜¯ä½ è´Ÿè´£çš„æ¨¡å—ï¼Œemmm æ”¹è¿˜æ˜¯ä¸æ”¹ï¼Ÿ

æˆ‘ä»¬å¯ä»¥é€šè¿‡ lint-staged åªå¯¹æš‚å­˜åŒºçš„ä»£ç è¿›è¡Œæ£€éªŒã€‚

```
pnpm add lint-staged -D
```

æ·»åŠ  package.json é…ç½®

```json
{
	"lint:lint-staged": "lint-staged"
}
```

æ–°å»º`.lintstagedrc.cjs`

```js
module.exports = {
	"*.{js,jsx,ts,tsx}": ["eslint --fix", "prettier --write"],
	"{!(package)*.json,*.code-snippets,.!(browserslist)*rc}": ["prettier --write--parser json"],
	"package.json": ["prettier --write"],
	"*.{scss,less,styl}": ["stylelint --fix", "prettier --write"],
	"*.md": ["prettier --write"]
};
```

ç°åœ¨æˆ‘ä»¬æ¯æ¬¡æäº¤ä»£ç å‰éƒ½ä¼šå¯¹æ”¹åŠ¨çš„æ–‡ä»¶è¿›è¡Œ Lint æ£€æŸ¥.

> æ³¨æ„,æäº¤æŠ¥é”™,ç„¶åä¿®æ”¹åè®°å¾—å†æ¬¡æš‚å­˜(`git add .`),å› ä¸º lint-staged åªæ˜¯å¯¹æš‚å­˜æ–‡ä»¶æ£€æŸ¥,ä¸æš‚å­˜å°±ä¼šç»§ç»­æŠ¥ä¹‹å‰çš„é”™.

### commitlint

å¯¹ git æäº¤æ—¶çš„ä¿¡æ¯è¿›è¡Œæ£€æŸ¥.

```bash
pnpm add @commitlint/cli @commitlint/config-conventional -D
```

ç„¶ååœ¨æ ¹ç›®å½•åˆ›å»ºé…ç½®æ–‡ä»¶ `.commitlintrc.cjs`

```js
/**
 * çº¦å®šgitæäº¤è§„èŒƒ
 * types:[ç©ºæ ¼]message
 * e.g. feat: è¿™æ˜¯ä¸€ä¸ªæ–°çš„feature
 */

// .commitlintrc.js
/** @type {import('cz-git').UserConfig} */

/*
 * @Description: commit-msgæäº¤ä¿¡æ¯æ ¼å¼è§„èŒƒ
 *
 * commit-msgæ ¼å¼: <type>(scope?): <subject>
 *   - type: ç”¨äºè¡¨æ˜æˆ‘ä»¬è¿™æ¬¡æäº¤çš„æ”¹åŠ¨ç±»å‹ï¼Œæ˜¯æ–°å¢äº†åŠŸèƒ½ï¼Ÿè¿˜æ˜¯ä¿®æ”¹äº†æµ‹è¯•ä»£ç ï¼Ÿåˆæˆ–è€…æ˜¯æ›´æ–°äº†æ–‡æ¡£ï¼Ÿ
 *     - build: ç¼–è¯‘ç›¸å…³çš„ä¿®æ”¹ï¼Œä¾‹å¦‚å‘å¸ƒç‰ˆæœ¬ã€å¯¹é¡¹ç›®æ„å»ºæˆ–è€…ä¾èµ–çš„æ”¹åŠ¨
 *     - chore: å…¶ä»–ä¿®æ”¹, æ¯”å¦‚æ”¹å˜æ„å»ºæµç¨‹ã€æˆ–è€…å¢åŠ ä¾èµ–åº“ã€å·¥å…·ç­‰
 *     - ci: æŒç»­é›†æˆä¿®æ”¹
 *     - docs: æ–‡æ¡£ä¿®æ”¹
 *     - feat: æ–°ç‰¹æ€§ã€æ–°åŠŸèƒ½
 *     - fix: ä¿®æ”¹bug
 *     - perf: ä¼˜åŒ–ç›¸å…³ï¼Œæ¯”å¦‚æå‡æ€§èƒ½ã€ä½“éªŒ
 *     - refactor: ä»£ç é‡æ„
 *     - revert: å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬
 *     - style: ä»£ç æ ¼å¼ä¿®æ”¹, æ³¨æ„ä¸æ˜¯ css ä¿®æ”¹
 *     - test: æµ‹è¯•ç”¨ä¾‹ä¿®æ”¹
 *   - scopeï¼šä¸€ä¸ªå¯é€‰çš„ä¿®æ”¹èŒƒå›´ã€‚ç”¨äºæ ‡è¯†æ­¤æ¬¡æäº¤ä¸»è¦æ¶‰åŠåˆ°ä»£ç ä¸­å“ªä¸ªæ¨¡å—ã€‚
 *   - Subjectï¼šä¸€å¥è¯æè¿°æ­¤æ¬¡æäº¤çš„ä¸»è¦å†…å®¹ï¼Œåšåˆ°è¨€ç®€æ„èµ…
 */

module.exports = {
	ignores: [commit => commit.includes('init')],
	extends: ['@commitlint/config-conventional'],
	rules: {
		// @see: https://commitlint.js.org/#/reference-rules
		'body-leading-blank': [2, 'always'],
		'footer-leading-blank': [1, 'always'],
		'header-max-length': [2, 'always', 108],
		'subject-empty': [2, 'never'],
		'type-empty': [2, 'never'],
		'subject-case': [0],
		'type-enum': [
			2,
			'always',
			[
				'feat',
				'fix',
				'docs',
				'style',
				'refactor',
				'perf',
				'test',
				'build',
				'ci',
				'chore',
				'revert',
				'wip',
				'workflow',
				'types',
				'release'
			]
		]
	},
  prompt: {
    alias: { fd: 'docs: fix typos' },
    messages: {
      type: 'é€‰æ‹©ä½ è¦æäº¤çš„ç±»å‹ :',
      scope: 'é€‰æ‹©ä¸€ä¸ªæäº¤èŒƒå›´ï¼ˆå¯é€‰ï¼‰:',
      customScope: 'è¯·è¾“å…¥è‡ªå®šä¹‰çš„æäº¤èŒƒå›´ :',
      subject: 'å¡«å†™ç®€çŸ­ç²¾ç‚¼çš„å˜æ›´æè¿° :\n',
      body: 'å¡«å†™æ›´åŠ è¯¦ç»†çš„å˜æ›´æè¿°ï¼ˆå¯é€‰ï¼‰ã€‚ä½¿ç”¨ "|" æ¢è¡Œ :\n',
      breaking: 'åˆ—ä¸¾éå…¼å®¹æ€§é‡å¤§çš„å˜æ›´ï¼ˆå¯é€‰ï¼‰ã€‚ä½¿ç”¨ "|" æ¢è¡Œ :\n',
      footerPrefixesSelect: 'é€‰æ‹©å…³è”issueå‰ç¼€ï¼ˆå¯é€‰ï¼‰:',
      customFooterPrefix: 'è¾“å…¥è‡ªå®šä¹‰issueå‰ç¼€ :',
      footer: 'åˆ—ä¸¾å…³è”issue (å¯é€‰) ä¾‹å¦‚: #31, #I3244 :\n',
      confirmCommit: 'æ˜¯å¦æäº¤æˆ–ä¿®æ”¹commit ?'
    },
    skipQuestions: ['footerPrefixesSelect','body','breaking','customFooterPrefix','footer'],
    types: [
      { value: 'feat', name: 'feat:     æ–°å¢åŠŸèƒ½ | A new feature' },
      { value: 'fix', name: 'fix:      ä¿®å¤ç¼ºé™· | A bug fix' },
      { value: 'docs', name: 'docs:     æ–‡æ¡£æ›´æ–° | Documentation only changes' },
      { value: 'style', name: 'style:    ä»£ç æ ¼å¼ | Changes that do not affect the meaning of the code' },
      { value: 'refactor', name: 'refactor: ä»£ç é‡æ„ | A code change that neither fixes a bug nor adds a feature' },
      { value: 'perf', name: 'perf:     æ€§èƒ½æå‡ | A code change that improves performance' },
      { value: 'test', name: 'test:     æµ‹è¯•ç›¸å…³ | Adding missing tests or correcting existing tests' },
      { value: 'build', name: 'build:    æ„å»ºç›¸å…³ | Changes that affect the build system or external dependencies' },
      { value: 'ci', name: 'ci:       æŒç»­é›†æˆ | Changes to our CI configuration files and scripts' },
      { value: 'revert', name: 'revert:   å›é€€ä»£ç  | Revert to a commit' },
      { value: 'chore', name: 'chore:    å…¶ä»–ä¿®æ”¹ | Other changes that do not modify src or test files' },
    ],
    useEmoji: false,
    emojiAlign: 'center',
    useAI: false,
    aiNumber: 1,
    themeColorCode: '',
    scopes: [],
    allowCustomScopes: true,
    allowEmptyScopes: true,
    customScopesAlign: 'bottom',
    customScopesAlias: 'custom',
    emptyScopesAlias: 'empty',
    upperCaseSubject: false,
    markBreakingChangeMode: false,
    allowBreakingChanges: ['feat', 'fix'],
    breaklineNumber: 100,
    breaklineChar: '|',
    issuePrefixes: [
      // å¦‚æœä½¿ç”¨ gitee ä½œä¸ºå¼€å‘ç®¡ç†
      { value: 'link', name: 'link:     é“¾æ¥ ISSUES è¿›è¡Œä¸­' },
      { value: 'closed', name: 'closed:   æ ‡è®° ISSUES å·²å®Œæˆ' }
    ],
    customIssuePrefixAlign: 'top',
    emptyIssuePrefixAlias: 'skip',
    customIssuePrefixAlias: 'custom',
    allowCustomIssuePrefix: true,
    allowEmptyIssuePrefix: true,
    confirmColorize: true,
    maxHeaderLength: Infinity,
    maxSubjectLength: Infinity,
    minSubjectLength: 0,
    scopeOverrides: undefined,
    defaultBody: '',
    defaultIssues: '',
    defaultScope: '',
    defaultSubject: ''
  }
}
```

ç„¶åæŠŠ commitlint å‘½ä»¤ä¹Ÿæ·»åŠ  Husky Hookã€‚è¿è¡Œå‘½ä»¤ï¼š

```bash
npx husky add .husky/commit-msg "npx --no-install commitlint -e $HUSKY_GIT_PARAMS"
```

#### ç±»å‹å‚è€ƒ

| ç±»å‹     | æè¿°                                                   |
| -------- | ------------------------------------------------------ |
| ci       | æŒç»­é›†æˆä¿®æ”¹                                           |
| docs     | æ–‡æ¡£ä¿®æ”¹                                               |
| feat     | æ–°ç‰¹æ€§ã€æ–°åŠŸèƒ½                                         |
| fix      | ä¿®æ”¹ bug                                               |
| perf     | ä¼˜åŒ–ç›¸å…³ï¼Œæ¯”å¦‚æå‡æ€§èƒ½ã€ä½“éªŒ                           |
| refactor | ä»£ç é‡æ„                                               |
| revert   | å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬                                       |
| style    | ä»£ç æ ¼å¼ä¿®æ”¹, æ³¨æ„ä¸æ˜¯ css ä¿®æ”¹                        |
| test     | æµ‹è¯•ç”¨ä¾‹ä¿®æ”¹                                           |
| build    | ç¼–è¯‘ç›¸å…³çš„ä¿®æ”¹ï¼Œä¾‹å¦‚å‘å¸ƒç‰ˆæœ¬ã€å¯¹é¡¹ç›®æ„å»ºæˆ–è€…ä¾èµ–çš„æ”¹åŠ¨ |
| chore    | å…¶ä»–ä¿®æ”¹, æ¯”å¦‚æ”¹å˜æ„å»ºæµç¨‹ã€æˆ–è€…å¢åŠ ä¾èµ–åº“ã€å·¥å…·ç­‰     |
| update   | æ™®é€šæ›´æ–°                                               |

#### ä½¿ç”¨æ–¹å¼

```git
git commit -m 'feat: å¢åŠ  xxx åŠŸèƒ½'
git commit -m 'fix(account): ä¿®å¤xxxçš„bug'
```
### Commitizen
Commitizenï¼šæ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œæç¤ºå·¥å…·ï¼Œå®ƒä¸»è¦ç”¨äºå¸®åŠ©æˆ‘ä»¬æ›´å¿«åœ°å†™å‡ºè§„èŒƒçš„commit message.

å»ºè®®ä¸ç”¨git commitå‘½ä»¤å¡«å†™gitæäº¤ä¿¡æ¯ï¼ˆå› ä¸ºè¿™æ ·å®¹æ˜“å‡ºé”™ï¼Œå¹¶ä¸”ä½ æœ‰å¯èƒ½ä¼šå¿˜è®°ä¸€äº›è§„èŒƒçš„è¦æ±‚ï¼‰ã€‚è€Œæ˜¯é€šè¿‡commitizenæ¥è‡ªåŠ¨ç”Ÿæˆã€‚
```bash
pnpm add commitizen -D
```
#### é…ç½®
`package.json`ä¸­æ·»åŠ .
```json
"config": {
  "commitizen": {
    "path": "node_modules/cz-git"
  }
}
```
### cz-git
è‡ªåŠ¨ç”Ÿæˆgit commitä¿¡æ¯.
```bash
pnpm add cz-git -D
```
```json
//package.json
"commit": "git pull && git add -A && git-cz && git push"
```
### release-itç”Ÿæˆç‰ˆæœ¬å˜æ›´æ—¥å¿—
```bash
pnpm add release-it @release-it/conventional-changelog -D
```
#### é…ç½®
æ–°å»º`.release-it.json`
```json
{
  "github": {
    "release": true
  },
  "git": {
  	// ç”Ÿæˆtagçš„æäº¤ä¿¡æ¯,
    "commitMessage": "release: v${version}"
  },
  "npm": {
    // ä¸åœ¨npmå‘è¡Œ
    "publish": false
  },
  "hooks": {
    "after:bump": "echo æ›´æ–°ç‰ˆæœ¬æˆåŠŸ"
  },
  "plugins": {
		"@release-it/conventional-changelog": {
			"infile": "CHANGELOG.md",
			"ignoreRecommendedBump": true,
			"strictSemVer": true,
			"preset": {
				"name": "conventionalcommits",
				"types": [
					{
						"type": "feat",
						"section": "âœ¨æ–°åŠŸèƒ½"
					},
					{
						"type": "fix",
						"section": "ğŸ›é—®é¢˜ä¿®å¤"
					},
					{
						"type": "docs",
						"section": "ğŸ“šæ–‡æ¡£"
					}
				]
			}
		}
	}
}
```
é»˜è®¤é…ç½®ä¸‹ï¼Œåªä¼šæœ‰featå’Œfixçš„æäº¤ä¼šåœ¨changelogä¸­æ˜¾ç¤ºå‡ºæ¥ã€‚
```json
// package.json
"release": "release-it",
```
# ç¯å¢ƒå˜é‡
## ç¯å¢ƒå˜é‡é…ç½®
åœ¨æ ¹ç›®å½•æ–°å¢æ–‡ä»¶`.env`, `.env.development`, `.env.production`, `.env.test`.
// .env

```yaml
# title
VITE_GLOB_APP_TITLE = 'React-Admin-SWC'

# port
VITE_PORT = 5173

# open è¿è¡Œ npm run dev æ—¶è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
VITE_OPEN = true

# æ˜¯å¦ç”ŸæˆåŒ…é¢„è§ˆæ–‡ä»¶
VITE_REPORT = false

# æ˜¯å¦å¼€å¯gzipå‹ç¼©
VITE_BUILD_GZIP = false

# æ˜¯å¦åˆ é™¤ç”Ÿäº§ç¯å¢ƒ console
VITE_DROP_CONSOLE = true
```

// .env.development

```yaml
# æœ¬åœ°ç¯å¢ƒ
NODE_ENV = 'development'

# æœ¬åœ°ç¯å¢ƒæ¥å£åœ°å€
VITE_API_URL = '/api'
```

// .env.production

```yaml
# çº¿ä¸Šç¯å¢ƒ
NODE_ENV = "production"

# çº¿ä¸Šç¯å¢ƒæ¥å£åœ°å€
VITE_API_URL = "https://xxx"
```

// .env.test

```yaml
# æµ‹è¯•ç¯å¢ƒ
NODE_ENV = "test"

# æµ‹è¯•ç¯å¢ƒæ¥å£åœ°å€
VITE_API_URL = "https://xxx.test"
```

### å¢åŠ å…¨å±€å£°æ˜æ–‡ä»¶

æ–°å»º`src/types/global.d.ts`

```ts
// * Vite
declare type Recordable<T = any> = Record<string, T>;

declare interface ViteEnv {
	VITE_API_URL: string;
	VITE_PORT: number;
	VITE_OPEN: boolean;
	VITE_GLOB_APP_TITLE: string;
	VITE_DROP_CONSOLE: boolean;
	VITE_PROXY_URL: string;
	VITE_BUILD_GZIP: boolean;
	VITE_REPORT: boolean;
}
```

## Vite æ’ä»¶é…ç½®

| æ’ä»¶åç§°                 | æè¿°                 |
| ------------------------ | -------------------- |
| vite-plugin-eslint       | æ”¯æŒ eslint          |
| vite-plugin-html         | HTML å‹ç¼©,EJS æ¨¡ç‰ˆ   |
| vite-plugin-compression  | ä½¿ç”¨ gzip æ¥å‹ç¼©èµ„æº |
| vite-plugin-svg-icons    | ç”¨äºç”Ÿæˆ svg é›ªç¢§å›¾. |
| rollup-plugin-visualizer | è§†å›¾åˆ†ææ–‡ä»¶æ‰“åŒ…å¤§å° |

### å®‰è£…æ’ä»¶

```
pnpm add vite-plugin-eslint vite-plugin-html vite-plugin-compression vite-plugin-svg-icons rollup-plugin-visualizer -D
```

#### Vite é…ç½®

```ts
// vite.config.ts
import react from '@vitejs/plugin-react-swc';
import path from 'path';
import { visualizer } from 'rollup-plugin-visualizer';
import { defineConfig, loadEnv, PluginOption, UserConfig } from 'vite';
import viteCompression from 'vite-plugin-compression';
import eslintPlugin from 'vite-plugin-eslint';
import { createHtmlPlugin } from 'vite-plugin-html';
import { createSvgIconsPlugin } from 'vite-plugin-svg-icons';
import { useEnv } from './build';

// @see: https://vitejs.dev/config/
export default defineConfig(({ mode }): UserConfig => {
	// æ ¹æ®å½“å‰å·¥ä½œç›®å½•ä¸­çš„ `mode` åŠ è½½ .env æ–‡ä»¶
	// è®¾ç½®ç¬¬ä¸‰ä¸ªå‚æ•°ä¸º '' æ¥åŠ è½½æ‰€æœ‰ç¯å¢ƒå˜é‡ï¼Œè€Œä¸ç®¡æ˜¯å¦æœ‰ `VITE_` å‰ç¼€ã€‚
	const env = loadEnv(mode, process.cwd(), '');
	const viteEnv = useEnv(env);

	return {
		// alias config
		resolve: {
			alias: {
				'@': path.join(__dirname, 'src'),
				'#': path.join(__dirname, 'src/types'),
				'@build': path.join(__dirname, 'build')
			}
		},
		// global css
		css: {},
		// server config
		server: {
			host: '0.0.0.0', // æœåŠ¡å™¨ä¸»æœºåï¼Œå¦‚æœå…è®¸å¤–éƒ¨è®¿é—®ï¼Œå¯è®¾ç½®ä¸º"0.0.0.0"
			port: viteEnv.VITE_PORT,
			open: viteEnv.VITE_OPEN,
			cors: true,
			// https: false,
			// ä»£ç†è·¨åŸŸï¼ˆmock ä¸éœ€è¦é…ç½®ï¼Œè¿™é‡Œåªæ˜¯ä¸ªäº‹åˆ—ï¼‰
			proxy: {
				'/api': {
					target: `https://localhost:${viteEnv.VITE_PORT}/api`,
					changeOrigin: true,
					rewrite: path => path.replace(/^\/api/, '')
				}
			}
		},
		// plugins
		plugins: [
			react(),
			createHtmlPlugin({
				inject: {
					data: {
						title: viteEnv.VITE_GLOB_APP_TITLE
					}
				}
			}),
			// * ä½¿ç”¨ svg å›¾æ ‡
			createSvgIconsPlugin({
				//* æŒ‡å®šéœ€è¦ç¼“å­˜çš„å›¾æ ‡æ–‡ä»¶å¤¹
				iconDirs: [path.resolve(process.cwd(), 'src/assets/icons')],
				//* æŒ‡å®šsymbolIdæ ¼å¼
				symbolId: 'icon-[dir]-[name]'
			}),
			// * EsLint æŠ¥é”™ä¿¡æ¯æ˜¾ç¤ºåœ¨æµè§ˆå™¨ç•Œé¢ä¸Š
			eslintPlugin(),
			// * æ˜¯å¦ç”ŸæˆåŒ…é¢„è§ˆ
			viteEnv.VITE_REPORT &&
				(visualizer({
					gzipSize: true,
					brotliSize: true,
					emitFile: false,
					filename: 'test.html', //åˆ†æå›¾ç”Ÿæˆçš„æ–‡ä»¶å
					open: true //å¦‚æœå­˜åœ¨æœ¬åœ°æœåŠ¡ç«¯å£ï¼Œå°†åœ¨æ‰“åŒ…åè‡ªåŠ¨å±•ç¤º
				}) as PluginOption),
			// * gzip compress
			viteEnv.VITE_BUILD_GZIP &&
				viteCompression({
					verbose: true,
					disable: false,
					threshold: 10240,
					algorithm: 'gzip',
					ext: '.gz'
				})
		],
		esbuild: {
			pure: viteEnv.VITE_DROP_CONSOLE ? ['console.log', 'debugger'] : []
		},
		// build configure
		build: {
			outDir: 'dist',
			// esbuild æ‰“åŒ…æ›´å¿«ï¼Œä½†æ˜¯ä¸èƒ½å»é™¤ console.logï¼Œå»é™¤ console ä½¿ç”¨ terser æ¨¡å¼
			minify: 'esbuild',
			// minify: "terser",
			// terserOptions: {
			// 	compress: {
			// 		drop_console: viteEnv.VITE_DROP_CONSOLE,
			// 		drop_debugger: true
			// 	}
			// },
			rollupOptions: {
				output: {
					// Static resource classification and packaging
					chunkFileNames: 'assets/js/[name]-[hash].js',
					entryFileNames: 'assets/js/[name]-[hash].js',
					assetFileNames: 'assets/[ext]/[name]-[hash].[ext]'
				}
			}
		}
	};
});

```

#### useEnv
å› ä¸ºåœ¨`vite.config.ts`ä¸­è·å–çš„ç¯å¢ƒå˜é‡è¿”å›çš„éƒ½æ˜¯`string`,å½“è·å–ç«¯å£æ—¶,æˆ‘ä»¬å¸Œæœ›æ˜¯`number`.
æ‰€ä»¥éœ€è¦åœ¨`build`æ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªå·¥å…·å‡½æ•°`index.ts`.
```ts
/**
 * @description å°† vite çš„åŸå§‹ç¯å¢ƒå˜é‡è½¬æˆæ­£ç¡®çš„ç±»å‹
 * @param env åŸå§‹çš„ vite ç¯å¢ƒå˜é‡
 * @returns è½¬æ¢æˆæ­£ç¡®ç±»å‹çš„ vite ç¯å¢ƒå˜é‡
 */
export const useEnv = (env: Recordable): ImportMetaEnv => {
  const ret: any = {};

  for (const envKey of Object.keys(env)) {
    let envValue = env[envKey];

    // è½¬æˆæ­£ç¡®çš„å¸ƒå°”ç±»å‹
    envValue =
      envValue === 'true' ? true : envValue === 'false' ? false : envValue;

    // VITE_PORT è½¬æˆ number
    if (envKey === 'VITE_PORT') {
      envValue = parseInt(envValue);
    }

    ret[envKey] = envValue;
  }

  return ret;
};
```
#### Vite-plugin-html

åœ¨`index.html`æ–‡ä»¶ä¸­å°† title æ›¿æ¢ä¸º`<%- title %>`.

## ä¿®æ”¹ tsconfig.json

åˆ é™¤`tsconfig.node.json`

```json
{
  "compilerOptions": {
    "target": "ESNext",
    "useDefineForClassFields": true,
    "lib": ["DOM", "DOM.Iterable", "ESNext"],
    "allowJs": false,
    "skipLibCheck": true,
    "esModuleInterop": false,
    "allowSyntheticDefaultImports": true,
    "strict": true,
    "forceConsistentCasingInFileNames": true,
    "module": "ESNext",
    "moduleResolution": "Node",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx",
    "types": ["vite-plugin-svg-icons/client"],
    // è§£æéç›¸å¯¹æ¨¡å—åçš„åŸºå‡†ç›®å½•
		"baseUrl": "./",
		// æ¨¡å—ååˆ°åŸºäº baseUrlçš„è·¯å¾„æ˜ å°„çš„åˆ—è¡¨ã€‚
		"paths": {
			"@": ["src"],
			"@/*": ["src/*"],
      "@build/*": ["build/*"],
      "#/*": ["src/types/"]
    }
  },

  "include": ["src","vite.config.ts","build"],
  "exclude": ["node_modules", "dist", "**/*.js"],
  },
```

## å·¥å…· utils

æ–°å»ºå·¥å…·æ–‡ä»¶å¤¹ utils.


## å…³è”è¿œç¨‹ä»“åº“
```git
git add .
git commit -m "feat: initial app"
git add remote xxx.git
git push -u origin master
```

# åŸºç¡€é€‰å‹
é¡¹ç›®åˆå§‹åŒ–æ—¶å·²ç»å°†react,vite,tsé»˜è®¤å®‰è£…äº†.å‰©ä¸‹çš„å°±æ˜¯ä¸€äº›å¼€å‘éœ€è¦çš„åŸºç¡€æ’ä»¶.
## å®‰è£…antd
ä¸€ä¸ªæ ·å¼ç»„ä»¶åº“.
```bash
pnpm add antd
```
### æ ·å¼é‡ç½®
åœ¨`main.tsx`æ–‡ä»¶ä¸­æ·»åŠ .
```ts
import "antd/dist/reset.css";
```
## å®‰è£…vanilla-extract
CSS-in-JSçš„é›¶è¿è¡Œæ—¶æ–¹æ¡ˆ.
```bash
pnpm add @vanilla-extract/css
```
### é…ç½®åœ¨vite
```bash
pnpm add @vanilla-extract/vite-plugin -D
```
```ts
//vite.config.ts
import { vanillaExtractPlugin } from '@vanilla-extract/vite-plugin';

export default {
  plugins: [vanillaExtractPlugin()]
};
```
## axios
```bash
pnpm add axios
```
## SWR
SWR æ˜¯ Next.js èƒŒåçš„å›¢é˜Ÿ vecel å¼€æºçš„ä¸€ä¸ª ç”¨äºæ•°æ®è¯·æ±‚çš„ React Hooks åº“.

### ç”¨æ³•ç¤ºä¾‹
```ts
import axios from 'axios';
import useSWR from 'swr';

import { UserResponse } from 'types/User';

const useUser = () => {
  const { data, error, isLoading, isValidating, mutate } = useSWR<UserResponse>('/user', (url) =>
    axios.get(url).then((res) => res.data.payload)
  );

  return {
    data,
    reload: mutate,
    isLoading,
    isValidating,
    isError: error,
  };
};

export default useUser;
```
```ts
import axios from 'axios';
import useSWR from 'swr';

import useUser from './useUser';

const useUserDetail = () => {
  const { data } = useUser();
  const { data, error, isLoading, isValidating, mutate } = useSWR(
    data[0].id ? `users/${data[0].id}/detail` : null,
    (url: string) => axios.get(url).then((res) => res.data.payload)
  );

  return {
    data,
    reload: mutate,
    isLoading,
    isValidating,
    isError: error,
  };
};

export default useUserDetail;
```
### ç»“åˆaxios
æ–°å»º`src/api/index.ts`æ–‡ä»¶.
```ts
import useSWR, { ConfigInterface, responseInterface } from 'swr'
import axios, { AxiosRequestConfig, AxiosResponse, AxiosError } from 'axios'
interface Repository {
  label: string;
  value: string;
}

//åˆ›å»ºaxioså®ä¾‹
const api = axios.create({
});
type JsonData = {
  code: number,
  data: Repository[]
}

export type GetRequest = AxiosRequestConfig
//å®šä¹‰è¿”å›ç±»å‹
export interface Return<JsonData, Error>
  extends Pick<
  responseInterface<AxiosResponse<JsonData>, AxiosError<Error>>,
  'isValidating' | 'revalidate' | 'error'
  > {
  data: JsonData | undefined
  response: AxiosResponse<JsonData> | undefined
  requestKey: string
}

export interface Config<JsonData = unknown, Error = unknown>
  extends Omit<
  ConfigInterface<AxiosResponse<JsonData>, AxiosError<Error>>,
  'initialData'
  > {
  initialData?: JsonData
}
//useRequest å°è£…swrçš„è¯·æ±‚hookså‡½æ•°
export default function useRequest<Error = unknown>(
  request: GetRequest,
  { initialData, ...config }: Config<JsonData, Error> = {}
): Return<JsonData, Error> {
  //å¦‚æœæ˜¯å¼€å‘æ¨¡å¼ï¼Œè¿™é‡Œåšç¯å¢ƒåˆ¤æ–­ï¼Œurlåé¢åŠ ä¸Š".mock"å°±ä¼šèµ°mockæ•°æ®
  if (process.env.NODE_ENV === "development") {
    request.url += ".mock"
  }
  const requestKey = request && JSON.stringify(request);

  const { data: response, error, isValidating, revalidate } = useSWR<
    AxiosResponse<JsonData>,
    AxiosError<Error>
  >(requestKey, () => api(request), {
    ...config,
    initialData: initialData && {
      status: 200,
      statusText: 'InitialData',
      config: request,
      headers: {},
      data: initialData
    }
  })
  // if(response?.data.code !==0){ //handler request error
  //     throw  "request wrong!"
  // }
  return {
    data: response?.data,
    requestKey,
    response,
    error,
    isValidating,
    revalidate
  }
}
```

## zustand
```bash
pnpm add zustand
```
zustand åšåˆ°çš„ç¬¬ä¸€ç‚¹åˆ›æ–°å°±æ˜¯ï¼šé»˜è®¤ä¸éœ€è¦ Providerã€‚ç›´æ¥å£°æ˜ä¸€ä¸ª hooks å¼çš„ useStore åjå°±å¯ä»¥åœ¨ä¸åŒç»„ä»¶ä¸­è¿›è¡Œè°ƒç”¨ã€‚å®ƒä»¬çš„çŠ¶æ€ä¼šç›´æ¥å…±äº«ï¼Œç®€å•è€Œç¾å¥½ã€‚

### ç”¨æ³•ç¤ºä¾‹
```tsx
// Zustand çŠ¶æ€å…±äº«
// store.ts
import create from 'zustand'

export const useStore = create(set => ({
  count: 1,
  // set å‡½æ•°åˆå¹¶çŠ¶æ€ä»¥å®ç°çŠ¶æ€æ›´æ–°
  inc: () => set(state => ({ count: state.count + 1 })),
}))

// Control.tsx
import { useStore } from './store';

function Control() {
  return <button onClick={()=>{
    useStore.setState((s)=>({...s,count: s.count - 5 }))
    }}>ï¼5</button>
}

// AnotherControl.tsx
import { useStore } from './store';

function AnotherControl() {
  const inc = useStore(state => state.inc)
  return <button onClick={inc}> +1 </button>
}

// Counter.tsx
import { useStore } from './store';

function Counter() {
  const { count } = useStore()
  return <h1>{count}</h1>
}
```
### è‡ªå¸¦æŒä¹…åŒ–
```ts
// ä½¿ç”¨è‡ªå¸¦çš„ Persist Middleware

import create from 'zustand'
import {  persist } from 'zustand/middleware'

interface BearState {
  bears: number
  increase: (by: number) => void
}

const useBearStore = create<BearState>(
  persist((set) => ({
    bears: 0,
    increase: (by) => set((state) => ({ bears: state.bears + by })),
  }))
)
```
### è‡ªå¸¦å¯è°ƒè¯•devtools
```ts
import devtools from 'zustand/middleware',
...
store = devtools(store)
```

## å®‰è£…react-router
```bash
pnpm add react-router-dom
```


## immer
```bash
npm add immer
```
